<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Smart Programmer - Register & Login</title>
</head>
<body>
    <!-- Form for registering a trainer -->
    <h2>Register Trainer</h2>
    <form id="trainerForm">
        <input type="text" id="trainerFirstName" placeholder="First Name" required>
        <input type="text" id="trainerLastName" placeholder="Last Name" required>
        <input type="email" id="trainerEmail" placeholder="Email" required>
        <input type="password" id="trainerPassword" placeholder="Password" required>
        <button type="submit">Register Trainer</button>
    </form>

    <!-- Form for registering a student -->
    <h2>Register Student</h2>
    <form id="studentForm">
        <input type="text" id="studentFirstName" placeholder="First Name" required>
        <input type="text" id="studentLastName" placeholder="Last Name" required>
        <input type="email" id="studentEmail" placeholder="Email" required>
        <input type="password" id="studentPassword" placeholder="Password" required>
        <input type="number" id="courseId" placeholder="Course ID" required>
        <button type="submit">Register Student</button>
    </form>

    <!-- Login Form -->
    <h2>Login</h2>
    <form id="loginForm">
        <input type="email" id="loginEmail" placeholder="Email" required>
        <input type="password" id="loginPassword" placeholder="Password" required>
        <button type="submit">Login</button>
    </form>

    <script>
        document.getElementById('trainerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                first_name: document.getElementById('trainerFirstName').value,
                last_name: document.getElementById('trainerLastName').value,
                email: document.getElementById('trainerEmail').value,
                password: document.getElementById('trainerPassword').value
            };
            fetch('/register/trainer', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }).then(response => response.json()).then(data => {
                alert('Trainer Registered');
            }).catch(error => {
                alert('Error registering trainer');
            });
        });

        document.getElementById('studentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                first_name: document.getElementById('studentFirstName').value,
                last_name: document.getElementById('studentLastName').value,
                email: document.getElementById('studentEmail').value,
                password: document.getElementById('studentPassword').value,
                course_id: document.getElementById('courseId').value
            };
            fetch('/register/student', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }).then(response => response.json()).then(data => {
                alert('Student Registered');
            }).catch(error => {
                alert('Error registering student');
            });
        });

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                email: document.getElementById('loginEmail').value,
                password: document.getElementById('loginPassword').value
            };
            fetch('/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }).then(response => response.json()).then(data => {
                alert('Login successful');
                localStorage.setItem('token', data.token); // Save token to local storage
            }).catch(error => {
                alert('Error logging in');
            });
        });
    </script>
</body>
</html>
